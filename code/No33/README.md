## 33 - 整数中 1 出现的次数

### 题目描述

求出1-13的整数中1出现的次数,并算出100-1300的整数中1出现的次数？
为此他特别数了一下1-13中包含1的数字有1、10、11、12、13因此共出现6次,但是对于后面问题他就没辙了。
ACMer希望你们帮帮他,并把问题更加普遍化,可以很快的求出任意非负整数区间中1出现的次数（从1 到 n 中1出现的次数）。

### 思路

设 N  = abcd 四位数，要求 N 中的 1 的个数，需要分别求出 a、b、c、d 四位即个位、十位、百位、千位上 1 的个数。

**那么怎么求各个位上的 1 的个数呢？**

以百位为例子：

* 当百位为 0 时，假设 N = 4045，那么百位上 1 的数为 100-199，1100-1199，2100-2199，3100-3199。
  也就是说，当百位为 0 时，1 的个数取决于高位，等于 高位 * 当前位，即 4 * 100 = 400 个。
* 当百位为 1 时，假设 N = 4145，那么百位上 1 的数为 100-199，1100-1199，2100-2199，3100-3199 以及 4100-4145。
  也就是说，当百位为 1 时，1 的个数取决于高位 和 低位，等于 高位 * 当前位 + 低位，即 4 * 100 + 45 + 1 = 446 个。
* 当百位为 2 - 9 时，假设 N = 4445，那么百位上 1 的数为 100-199，1100-1199，2100-2199，3100-3199 以及 4100-4199。
  也就是说，当百位为 2 - 9 时，1 的个数取决于高位，等于 （高位 + 1） * 当前位，即 （4 + 1） * 100 = 500 个。

**那么，如何求当前位、高位、低位？**

i 初始化为 1， 代表检查个位，每次乘于 10，检查进一位。

```java
int pre = (int) (n / (i * 10));
int cur = (int) ((n / i) % 10);
int aft = (int) (n - (n / i) * i);
```

### 代码
[代码-JAVA](Solution.java)

```java
public class Solution {
    public int NumberOf1Between1AndN_Solution(int n) {
        int counter = 0;
        long i = 1;
        while ((n / i) != 0) {
            int pre = (int) (n / (i * 10));
            int cur = (int) ((n / i) % 10);
            int aft = (int) (n - (n / i) * i);

            // 如果当前位为 0 ， 那么 1 的个数取决于高位，等于高位 * 当前位数
            if (cur == 0) {
                counter += pre * i;
            }
            // 如果当前位为 1， 那么 1 的个数不仅取决于高位，还取决于低位，等于高位 * 当前位数 + 低位 + 1
            else if (cur == 1) {
                counter += pre * i + aft + 1;
            }
            // 如果当前位为 2 - 9， 那么 1 的个数取决于高位，等于（高位 + 1） * 当前位数
            else {
                counter += (pre + 1) * i;
            }

            i *= 10;
        }

        return counter;
    }
}
```